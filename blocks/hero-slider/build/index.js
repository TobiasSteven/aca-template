(()=>{"use strict";const e=window.wp.blocks,t=window.React,a=window.wp.i18n,n=window.wp.blockEditor,o=window.wp.components,l=window.wp.element;window.wp.data;const r=JSON.parse('{"UU":"mon-theme-aca/hero-slider"}');(0,e.registerBlockType)(r.UU,{edit:function({attributes:e,setAttributes:r}){const{slides:i,sliderHeight:c,autoPlay:m,autoPlaySpeed:s,showNavigation:d,showIndicators:p}=e,[u,h]=(0,l.useState)(0),g=(e,t,a)=>{const n=[...i];n[e]={...n[e],[t]:a},r({slides:n})},b=(0,n.useBlockProps)({className:"wp-block-mon-theme-aca-hero-slider"});return(0,t.createElement)(t.Fragment,null,(0,t.createElement)(n.InspectorControls,null,(0,t.createElement)(o.PanelBody,{title:(0,a.__)("Paramètres du slider","mon-theme-aca"),initialOpen:!0},(0,t.createElement)(o.SelectControl,{label:(0,a.__)("Hauteur du slider","mon-theme-aca"),value:c,options:[{label:"50vh",value:"50vh"},{label:"60vh",value:"60vh"},{label:"70vh",value:"70vh"},{label:"80vh",value:"80vh"},{label:"90vh",value:"90vh"},{label:"100vh",value:"100vh"}],onChange:e=>r({sliderHeight:e})}),(0,t.createElement)(o.ToggleControl,{label:(0,a.__)("Lecture automatique","mon-theme-aca"),checked:m,onChange:e=>r({autoPlay:e})}),m&&(0,t.createElement)(o.RangeControl,{label:(0,a.__)("Vitesse de lecture (ms)","mon-theme-aca"),value:s,onChange:e=>r({autoPlaySpeed:e}),min:2e3,max:1e4,step:500}),(0,t.createElement)(o.ToggleControl,{label:(0,a.__)("Afficher la navigation","mon-theme-aca"),checked:d,onChange:e=>r({showNavigation:e})}),(0,t.createElement)(o.ToggleControl,{label:(0,a.__)("Afficher les indicateurs","mon-theme-aca"),checked:p,onChange:e=>r({showIndicators:e})})),(0,t.createElement)(o.PanelBody,{title:(0,a.__)("Gestion des slides","mon-theme-aca"),initialOpen:!1},(0,t.createElement)("div",{style:{marginBottom:"20px",padding:"10px",backgroundColor:"#f0f0f0",borderRadius:"4px"}},(0,t.createElement)("p",{style:{margin:"0 0 10px 0",fontWeight:"bold"}},(0,a.__)("Nombre de slides :","mon-theme-aca")," ",i.length),(0,t.createElement)(o.Button,{variant:"primary",onClick:()=>{const e={backgroundImage:"",title:(0,a.__)("Nouveau slide","mon-theme-aca"),subtitle:(0,a.__)("Votre sous-titre ici","mon-theme-aca"),primaryButtonText:(0,a.__)("Bouton principal","mon-theme-aca"),primaryButtonUrl:"#",secondaryButtonText:(0,a.__)("Bouton secondaire","mon-theme-aca"),secondaryButtonUrl:"#"},t=[...i,e];r({slides:t}),h(t.length-1)},style:{marginBottom:"5px"}},(0,a.__)("➕ Ajouter un slide","mon-theme-aca")),(0,t.createElement)("p",{style:{margin:"5px 0 0 0",fontSize:"12px",color:"#666"}},(0,a.__)("Vous pouvez ajouter autant de slides que vous voulez","mon-theme-aca"))),i.map(((e,l)=>(0,t.createElement)("div",{key:`slide-${l}`,style:{marginBottom:"20px",padding:"15px",border:l===u?"2px solid #0073aa":"1px solid #ddd",borderRadius:"4px",backgroundColor:l===u?"#f0f8ff":"#fff"}},(0,t.createElement)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"}},(0,t.createElement)(o.__experimentalHeading,{level:4,style:{margin:0}},(0,a.__)("Slide","mon-theme-aca")," ",l+1,l===u&&(0,t.createElement)("span",{style:{fontSize:"12px",color:"#0073aa",marginLeft:"10px"}},(0,a.__)("(En cours de prévisualisation)","mon-theme-aca"))),(0,t.createElement)("div",null,(0,t.createElement)(o.Button,{variant:"secondary",onClick:()=>h(l),style:{marginRight:"5px",fontSize:"12px"}},(0,a.__)("Prévisualiser","mon-theme-aca")),i.length>1&&(0,t.createElement)(o.Button,{variant:"secondary",isDestructive:!0,onClick:()=>(e=>{if(i.length>1){const t=i.filter(((t,a)=>a!==e));r({slides:t}),u>=t.length&&h(t.length-1)}})(l),style:{fontSize:"12px"}},(0,a.__)("🗑️ Supprimer","mon-theme-aca")))),(0,t.createElement)("div",{style:{marginBottom:"15px"}},(0,t.createElement)("label",{style:{display:"block",marginBottom:"5px",fontWeight:"600"}},(0,a.__)("Image de fond","mon-theme-aca")),(0,t.createElement)(n.MediaUploadCheck,{fallback:(0,t.createElement)("p",null,(0,a.__)("Pour sélectionner une image, vous devez avoir les permissions de téléchargement.","mon-theme-aca"))},(0,t.createElement)(n.MediaUpload,{onSelect:e=>{console.log("Media selected:",e),e&&e.url&&g(l,"backgroundImage",e.url)},allowedTypes:["image"],value:e.backgroundImage,multiple:!1,render:({open:n})=>(0,t.createElement)("div",null,(0,t.createElement)(o.Button,{variant:e.backgroundImage?"secondary":"primary",onClick:n,style:{display:"block",marginBottom:"10px",width:"100%"}},e.backgroundImage?(0,a.__)("📷 Changer l'image","mon-theme-aca"):(0,a.__)("📷 Sélectionner une image","mon-theme-aca")),e.backgroundImage&&(0,t.createElement)("div",{style:{marginTop:"10px"}},(0,t.createElement)("img",{src:e.backgroundImage,alt:(0,a.__)("Image de fond","mon-theme-aca"),style:{width:"100%",height:"auto",maxHeight:"150px",objectFit:"cover",border:"1px solid #ddd",borderRadius:"4px"}}),(0,t.createElement)(o.Button,{variant:"link",isDestructive:!0,onClick:()=>g(l,"backgroundImage",""),style:{marginTop:"5px",fontSize:"12px"}},(0,a.__)("❌ Supprimer l'image","mon-theme-aca"))))})),(0,t.createElement)("p",{style:{fontSize:"11px",color:"#666",margin:"5px 0 0 0"}},(0,a.__)("Formats supportés : JPG, PNG, GIF, WebP","mon-theme-aca"))),(0,t.createElement)("div",{style:{display:"grid",gap:"10px"}},(0,t.createElement)(o.TextControl,{label:(0,a.__)("📝 Titre","mon-theme-aca"),value:e.title,onChange:e=>g(l,"title",e),placeholder:(0,a.__)("Entrez le titre du slide","mon-theme-aca")}),(0,t.createElement)(o.TextControl,{label:(0,a.__)("📄 Sous-titre","mon-theme-aca"),value:e.subtitle,onChange:e=>g(l,"subtitle",e),placeholder:(0,a.__)("Entrez le sous-titre du slide","mon-theme-aca")}),(0,t.createElement)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px"}},(0,t.createElement)(o.TextControl,{label:(0,a.__)("🔗 Texte bouton principal","mon-theme-aca"),value:e.primaryButtonText,onChange:e=>g(l,"primaryButtonText",e),placeholder:(0,a.__)("Ex: Découvrir","mon-theme-aca")}),(0,t.createElement)(o.TextControl,{label:(0,a.__)("🌐 URL bouton principal","mon-theme-aca"),value:e.primaryButtonUrl,onChange:e=>g(l,"primaryButtonUrl",e),placeholder:(0,a.__)("Ex: #section","mon-theme-aca")})),(0,t.createElement)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px"}},(0,t.createElement)(o.TextControl,{label:(0,a.__)("🔗 Texte bouton secondaire","mon-theme-aca"),value:e.secondaryButtonText,onChange:e=>g(l,"secondaryButtonText",e),placeholder:(0,a.__)("Ex: En savoir plus","mon-theme-aca")}),(0,t.createElement)(o.TextControl,{label:(0,a.__)("🌐 URL bouton secondaire","mon-theme-aca"),value:e.secondaryButtonUrl,onChange:e=>g(l,"secondaryButtonUrl",e),placeholder:(0,a.__)("Ex: /contact","mon-theme-aca")})))))))),(0,t.createElement)("div",{...b},(0,t.createElement)("div",{className:"hero-slider-editor",style:{position:"relative",height:c,backgroundColor:"#f0f0f0",borderRadius:"8px",overflow:"hidden"}},i.length>1&&(0,t.createElement)("div",{style:{position:"absolute",top:"10px",left:"10px",zIndex:10,backgroundColor:"rgba(0,0,0,0.7)",borderRadius:"4px",padding:"5px"}},i.map(((e,a)=>(0,t.createElement)(o.Button,{key:a,variant:u===a?"primary":"secondary",onClick:()=>h(a),style:{margin:"2px",minWidth:"30px",fontSize:"12px"}},a+1)))),i[u]&&(0,t.createElement)("div",{className:"hero-slide-preview",style:{height:"100%",backgroundImage:i[u].backgroundImage?`url(${i[u].backgroundImage})`:"none",backgroundSize:"cover",backgroundPosition:"center",display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",color:"white",padding:"2rem",backgroundColor:i[u].backgroundImage?"transparent":"#2D9B8A"}},(0,t.createElement)("div",{className:"hero-content-preview"},(0,t.createElement)("h1",{style:{fontSize:"clamp(2rem, 5vw, 4rem)",fontWeight:"bold",marginBottom:"1rem",textShadow:"2px 2px 4px rgba(0,0,0,0.5)"}},i[u].title),(0,t.createElement)("p",{style:{fontSize:"clamp(1rem, 2vw, 1.25rem)",marginBottom:"2rem",textShadow:"1px 1px 2px rgba(0,0,0,0.5)"}},i[u].subtitle),(0,t.createElement)("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"}},i[u].primaryButtonText&&(0,t.createElement)("span",{style:{display:"inline-block",backgroundColor:"#28A745",color:"white",fontWeight:"600",padding:"12px 32px",borderRadius:"8px",textDecoration:"none"}},i[u].primaryButtonText),i[u].secondaryButtonText&&(0,t.createElement)("span",{style:{display:"inline-block",backgroundColor:"#FFFFFF",color:"#343A40",fontWeight:"600",padding:"12px 32px",borderRadius:"8px",textDecoration:"none"}},i[u].secondaryButtonText)))))))},save:function({attributes:e}){const{slides:a,sliderHeight:o,autoPlay:l,autoPlaySpeed:r,showNavigation:i,showIndicators:c}=e,m=n.useBlockProps.save({className:"wp-block-mon-theme-aca-hero-slider"});return(0,t.createElement)("div",{...m},(0,t.createElement)("section",{className:"hero-slider","data-auto-play":l,"data-auto-play-speed":r,"data-show-navigation":i,"data-show-indicators":c,style:{position:"relative",width:"100%",overflow:"hidden",height:o}},a.map(((e,a)=>(0,t.createElement)("div",{key:a,className:"hero-slide "+(0===a?"active":""),style:{backgroundImage:e.backgroundImage?`url(${e.backgroundImage})`:"none",backgroundColor:e.backgroundImage?"transparent":"#2D9B8A"}},(0,t.createElement)("div",{className:"hero-content"},(0,t.createElement)("h1",{className:"hero-title"},e.title),(0,t.createElement)("p",{className:"hero-subtitle"},e.subtitle),(0,t.createElement)("div",{className:"hero-buttons"},e.primaryButtonText&&(0,t.createElement)("a",{href:e.primaryButtonUrl,className:"hero-btn hero-btn-primary"},e.primaryButtonText),e.secondaryButtonText&&(0,t.createElement)("a",{href:e.secondaryButtonUrl,className:"hero-btn hero-btn-secondary"},e.secondaryButtonText)))))),i&&a.length>1&&(0,t.createElement)(t.Fragment,null,(0,t.createElement)("button",{className:"hero-nav hero-nav-prev","aria-label":"Slide précédente"},"❮"),(0,t.createElement)("button",{className:"hero-nav hero-nav-next","aria-label":"Slide suivante"},"❯")),c&&a.length>1&&(0,t.createElement)("div",{className:"hero-indicators"},a.map(((e,a)=>(0,t.createElement)("button",{key:a,className:"hero-indicator "+(0===a?"active":""),"aria-label":`Aller à la slide ${a+1}`}))))))}})})();