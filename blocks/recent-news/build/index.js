(()=>{"use strict";var e,t={812:()=>{const e=window.wp.blocks,t=window.React,a=window.wp.i18n,r=window.wp.blockEditor,n=window.wp.components,l=(window.wp.data,window.wp.coreData),o=JSON.parse('{"UU":"mon-theme-aca/recent-news"}');(0,e.registerBlockType)(o.UU,{edit:function({attributes:e,setAttributes:o}){const{sectionTitle:c,numberOfPosts:s,selectedCategories:m,showDate:i,showExcerpt:d,orderBy:h,order:p}=e,{records:u,isResolving:g}=(0,l.useEntityRecords)("taxonomy","category",{per_page:-1,hide_empty:!0}),_={per_page:s,_embed:!0,order:p,orderby:h};m.length>0&&(_.categories=m);const{records:v,isResolving:b}=(0,l.useEntityRecords)("postType","post",_),w=(0,r.useBlockProps)();return(0,t.createElement)(t.Fragment,null,(0,t.createElement)(r.InspectorControls,null,(0,t.createElement)(n.PanelBody,{title:(0,a.__)("Paramètres des actualités","mon-theme-aca")},(0,t.createElement)(n.TextControl,{label:(0,a.__)("Titre de la section","mon-theme-aca"),value:c,onChange:e=>o({sectionTitle:e}),placeholder:(0,a.__)("Actualités Récentes","mon-theme-aca")}),(0,t.createElement)(n.RangeControl,{label:(0,a.__)("Nombre d'articles","mon-theme-aca"),value:s,onChange:e=>o({numberOfPosts:e}),min:1,max:12}),(0,t.createElement)(n.SelectControl,{label:(0,a.__)("Trier par","mon-theme-aca"),value:h,options:[{label:"Date",value:"date"},{label:"Titre",value:"title"},{label:"Aléatoire",value:"rand"}],onChange:e=>o({orderBy:e})}),(0,t.createElement)(n.SelectControl,{label:(0,a.__)("Ordre","mon-theme-aca"),value:p,options:[{label:"Décroissant",value:"desc"},{label:"Croissant",value:"asc"}],onChange:e=>o({order:e})}),(0,t.createElement)(n.ToggleControl,{label:(0,a.__)("Afficher la date","mon-theme-aca"),checked:i,onChange:e=>o({showDate:e})}),(0,t.createElement)(n.ToggleControl,{label:(0,a.__)("Afficher l'extrait","mon-theme-aca"),checked:d,onChange:e=>o({showExcerpt:e})})),(0,t.createElement)(n.PanelBody,{title:(0,a.__)("Catégories","mon-theme-aca"),initialOpen:!1},g&&(0,t.createElement)("p",null,(0,a.__)("Chargement des catégories...","mon-theme-aca")),u&&u.map((e=>(0,t.createElement)(n.CheckboxControl,{key:e.id,label:e.name,checked:m.includes(e.id),onChange:t=>((e,t)=>{let a=[...m];t?a.push(e):a=a.filter((t=>t!==e)),o({selectedCategories:a})})(e.id,t)}))))),(0,t.createElement)("div",{...w},(0,t.createElement)("div",{className:"recent-news-editor"},(0,t.createElement)("h2",null,c||(0,a.__)("Actualités Récentes","mon-theme-aca")),b&&(0,t.createElement)("p",null,(0,a.__)("Chargement des articles...","mon-theme-aca")),v&&0===v.length&&(0,t.createElement)("p",null,(0,a.__)("Aucun article trouvé avec ces paramètres.","mon-theme-aca")),v&&v.length>0&&(0,t.createElement)("div",{className:"news-cards-container"},v.map(((e,r)=>{const n=e._embedded?.["wp:featuredmedia"]?.[0],l=["date-green","date-blue","date-green"],o=l[r%l.length];return(0,t.createElement)("article",{key:e.id,className:"news-card"},(0,t.createElement)("div",{className:"card-image-container"},n?(0,t.createElement)("img",{src:n.source_url,alt:n.alt_text||e.title.rendered}):(0,t.createElement)("div",{className:"placeholder-image"},(0,a.__)("Pas d'image","mon-theme-aca")),i&&(0,t.createElement)("span",{className:`card-date ${o}`},new Date(e.date).toLocaleDateString("fr-FR",{day:"2-digit",month:"short",year:"numeric"}).toUpperCase())),(0,t.createElement)("div",{className:"card-content"},(0,t.createElement)("h3",{dangerouslySetInnerHTML:{__html:e.title.rendered}}),d&&(0,t.createElement)("p",{dangerouslySetInnerHTML:{__html:e.excerpt.rendered.replace(/<[^>]*>/g,"")}}),(0,t.createElement)("a",{href:"#",className:"read-more"},(0,a.__)("Lire plus","mon-theme-aca")," →")))}))))))}})}},a={};function r(e){var n=a[e];if(void 0!==n)return n.exports;var l=a[e]={exports:{}};return t[e](l,l.exports,r),l.exports}r.m=t,e=[],r.O=(t,a,n,l)=>{if(!a){var o=1/0;for(i=0;i<e.length;i++){for(var[a,n,l]=e[i],c=!0,s=0;s<a.length;s++)(!1&l||o>=l)&&Object.keys(r.O).every((e=>r.O[e](a[s])))?a.splice(s--,1):(c=!1,l<o&&(o=l));if(c){e.splice(i--,1);var m=n();void 0!==m&&(t=m)}}return t}l=l||0;for(var i=e.length;i>0&&e[i-1][2]>l;i--)e[i]=e[i-1];e[i]=[a,n,l]},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={57:0,350:0};r.O.j=t=>0===e[t];var t=(t,a)=>{var n,l,[o,c,s]=a,m=0;if(o.some((t=>0!==e[t]))){for(n in c)r.o(c,n)&&(r.m[n]=c[n]);if(s)var i=s(r)}for(t&&t(a);m<o.length;m++)l=o[m],r.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return r.O(i)},a=globalThis.webpackChunkmon_theme_aca=globalThis.webpackChunkmon_theme_aca||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var n=r.O(void 0,[350],(()=>r(812)));n=r.O(n)})();