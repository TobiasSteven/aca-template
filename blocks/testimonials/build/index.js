(()=>{"use strict";const e=window.wp.blocks,t=window.React,a=window.wp.i18n,n=window.wp.blockEditor,m=window.wp.components,l=window.wp.element,o=JSON.parse('{"UU":"mon-theme-aca/testimonials"}');(0,e.registerBlockType)(o.UU,{edit:function({attributes:e,setAttributes:o}){const{sectionTitle:i,testimonials:c}=e,r=(e,t,a)=>{const n=[...c];n[e][t]=a,o({testimonials:n})},s=(0,n.useBlockProps)({className:"testimonials-section-editor"});return(0,t.createElement)(l.Fragment,null,(0,t.createElement)(n.InspectorControls,null,(0,t.createElement)(m.PanelBody,{title:(0,a.__)("Paramètres généraux","mon-theme-aca")},(0,t.createElement)(m.TextControl,{label:(0,a.__)("Titre de la section","mon-theme-aca"),value:i,onChange:e=>o({sectionTitle:e})}),(0,t.createElement)(m.Button,{variant:"primary",onClick:()=>{const e={image:"",quote:(0,a.__)("Nouveau témoignage...","mon-theme-aca"),name:(0,a.__)("Nom du témoin","mon-theme-aca"),title:(0,a.__)("Fonction, Lieu","mon-theme-aca")};o({testimonials:[...c,e]})},style:{marginTop:"16px"}},(0,a.__)("Ajouter un témoignage","mon-theme-aca"))),c.map(((e,l)=>(0,t.createElement)(m.PanelBody,{key:l,title:(0,a.__)("Témoignage","mon-theme-aca")+` ${l+1}`,initialOpen:!1},(0,t.createElement)(m.BaseControl,{label:(0,a.__)("Image du témoin","mon-theme-aca")},(0,t.createElement)(n.MediaUploadCheck,null,(0,t.createElement)(n.MediaUpload,{onSelect:e=>r(l,"image",e.url),allowedTypes:["image"],value:e.image,render:({open:n})=>(0,t.createElement)(m.Button,{onClick:n,variant:e.image?"secondary":"primary"},e.image?(0,a.__)("Changer l'image","mon-theme-aca"):(0,a.__)("Sélectionner une image","mon-theme-aca"))})),e.image&&(0,t.createElement)("div",{style:{marginTop:"10px"}},(0,t.createElement)("img",{src:e.image,alt:"",style:{maxWidth:"100px",height:"auto"}}),(0,t.createElement)("br",null),(0,t.createElement)(m.Button,{isDestructive:!0,variant:"link",onClick:()=>r(l,"image","")},(0,a.__)("Supprimer l'image","mon-theme-aca")))),(0,t.createElement)(m.TextControl,{label:(0,a.__)("URL d'image (alternative)","mon-theme-aca"),value:e.image,onChange:e=>r(l,"image",e),help:(0,a.__)("Vous pouvez aussi saisir directement une URL d'image","mon-theme-aca")}),(0,t.createElement)(m.BaseControl,{label:(0,a.__)("Citation","mon-theme-aca")},(0,t.createElement)("textarea",{value:e.quote,onChange:e=>r(l,"quote",e.target.value),rows:"4",style:{width:"100%"}})),(0,t.createElement)(m.TextControl,{label:(0,a.__)("Nom du témoin","mon-theme-aca"),value:e.name,onChange:e=>r(l,"name",e)}),(0,t.createElement)(m.TextControl,{label:(0,a.__)("Fonction et lieu","mon-theme-aca"),value:e.title,onChange:e=>r(l,"title",e)}),(0,t.createElement)(m.Button,{isDestructive:!0,variant:"link",onClick:()=>(e=>{const t=c.filter(((t,a)=>a!==e));o({testimonials:t})})(l),style:{marginTop:"16px"}},(0,a.__)("Supprimer ce témoignage","mon-theme-aca")))))),(0,t.createElement)("div",{...s},(0,t.createElement)("div",{className:"testimonials-section"},(0,t.createElement)(n.RichText,{tagName:"h2",value:i,onChange:e=>o({sectionTitle:e}),placeholder:(0,a.__)("Titre de la section...","mon-theme-aca"),allowedFormats:[]}),(0,t.createElement)("div",{className:"testimonials-grid"},c.map(((e,m)=>(0,t.createElement)("div",{key:m,className:"testimonial-card"},e.image&&(0,t.createElement)("img",{src:e.image,alt:`Photo de ${e.name}`}),(0,t.createElement)(n.RichText,{tagName:"p",className:"quote",value:e.quote,onChange:e=>r(m,"quote",e),placeholder:(0,a.__)("Citation du témoignage...","mon-theme-aca"),allowedFormats:["core/italic","core/bold"]}),(0,t.createElement)(n.RichText,{tagName:"p",className:"name",value:e.name,onChange:e=>r(m,"name",e),placeholder:(0,a.__)("Nom du témoin...","mon-theme-aca"),allowedFormats:[]}),(0,t.createElement)(n.RichText,{tagName:"p",className:"title",value:e.title,onChange:e=>r(m,"title",e),placeholder:(0,a.__)("Fonction, lieu...","mon-theme-aca"),allowedFormats:[]}))))))))},save:function({attributes:e}){const{sectionTitle:a,testimonials:m}=e,l=n.useBlockProps.save({className:"wp-block-mon-theme-aca-testimonials"});return(0,t.createElement)("div",{...l},(0,t.createElement)("section",{className:"testimonials-section"},(0,t.createElement)(n.RichText.Content,{tagName:"h2",value:a}),(0,t.createElement)("div",{className:"testimonials-grid"},m.map(((e,a)=>(0,t.createElement)("div",{key:a,className:"testimonial-card"},e.image&&(0,t.createElement)("img",{src:e.image,alt:`Photo de ${e.name}`}),(0,t.createElement)(n.RichText.Content,{tagName:"p",className:"quote",value:e.quote}),(0,t.createElement)(n.RichText.Content,{tagName:"p",className:"name",value:e.name}),(0,t.createElement)(n.RichText.Content,{tagName:"p",className:"title",value:e.title})))))))}})})();