(()=>{"use strict";const e=window.wp.blocks,t=window.React,l=window.wp.i18n,o=window.wp.blockEditor,c=window.wp.components,a=window.wp.element,n=JSON.parse('{"UU":"mon-theme-aca/publications-collections"}');(0,e.registerBlockType)(n.UU,{edit:function({attributes:e,setAttributes:n}){const{title:r,collections:i,backgroundColor:s,titleColor:m,cardBgColor:d,cardBorderColor:u,cardTitleColor:C,cardTextColor:h,cardCountColor:p}=e,[E,_]=(0,a.useState)(0),[b,N]=(0,a.useState)({title:"",description:"",icon:"ðŸ“š",count:"0"}),g=(0,o.useBlockProps)({className:"publications-collections-block",style:{backgroundColor:s}}),v=(e,t,l)=>{const o=[...i];o[e]={...o[e],[t]:l},n({collections:o})};return(0,t.createElement)(a.Fragment,null,(0,t.createElement)(o.InspectorControls,null,(0,t.createElement)(c.PanelBody,{title:(0,l.__)("Collections","mon-theme-aca")},(0,t.createElement)("div",{className:"collections-editor"},(0,t.createElement)("div",{className:"collections-list"},(0,t.createElement)("p",{className:"collections-title"},(0,l.__)("Collections existantes","mon-theme-aca")),i.length>0?(0,t.createElement)("div",{className:"collections-tabs"},i.map(((e,o)=>(0,t.createElement)("button",{key:o,className:"collection-tab "+(o===E?"active":""),onClick:()=>_(o)},e.title||(0,l.__)("Sans titre","mon-theme-aca"))))):(0,t.createElement)("p",{className:"no-collections"},(0,l.__)("Aucune collection ajoutÃ©e","mon-theme-aca")),i.length>0&&(0,t.createElement)("div",{className:"collection-editor"},(0,t.createElement)(c.TextControl,{label:(0,l.__)("Titre","mon-theme-aca"),value:i[E].title,onChange:e=>v(E,"title",e)}),(0,t.createElement)(c.TextControl,{label:(0,l.__)("Description","mon-theme-aca"),value:i[E].description,onChange:e=>v(E,"description",e)}),(0,t.createElement)(c.TextControl,{label:(0,l.__)("IcÃ´ne (emoji)","mon-theme-aca"),value:i[E].icon,onChange:e=>v(E,"icon",e)}),(0,t.createElement)(c.TextControl,{label:(0,l.__)("Nombre de ressources","mon-theme-aca"),value:i[E].count,onChange:e=>v(E,"count",e)}),(0,t.createElement)(c.Button,{isDestructive:!0,onClick:()=>(e=>{const t=[...i];t.splice(e,1),n({collections:t}),E>=t.length&&_(Math.max(0,t.length-1))})(E)},(0,l.__)("Supprimer cette collection","mon-theme-aca")))),(0,t.createElement)("div",{className:"add-collection"},(0,t.createElement)("p",{className:"add-collection-title"},(0,l.__)("Ajouter une collection","mon-theme-aca")),(0,t.createElement)(c.TextControl,{placeholder:(0,l.__)("Titre de la collection","mon-theme-aca"),value:b.title,onChange:e=>N({...b,title:e})}),(0,t.createElement)(c.TextControl,{placeholder:(0,l.__)("Description","mon-theme-aca"),value:b.description,onChange:e=>N({...b,description:e})}),(0,t.createElement)("div",{className:"collection-details"},(0,t.createElement)(c.TextControl,{placeholder:(0,l.__)("IcÃ´ne (emoji)","mon-theme-aca"),value:b.icon,onChange:e=>N({...b,icon:e})}),(0,t.createElement)(c.TextControl,{placeholder:(0,l.__)("Nombre","mon-theme-aca"),value:b.count,onChange:e=>N({...b,count:e})})),(0,t.createElement)(c.Button,{isPrimary:!0,onClick:()=>{""!==b.title.trim()&&(n({collections:[...i,{...b}]}),N({title:"",description:"",icon:"ðŸ“š",count:"0"}))},disabled:!b.title.trim()},(0,l.__)("Ajouter","mon-theme-aca"))))),(0,t.createElement)(c.PanelBody,{title:(0,l.__)("Couleurs","mon-theme-aca")},(0,t.createElement)("div",{className:"color-option"},(0,t.createElement)("label",null,(0,l.__)("Couleur de fond","mon-theme-aca")),(0,t.createElement)(c.ColorPicker,{color:s,onChange:e=>n({backgroundColor:e}),enableAlpha:!0})),(0,t.createElement)("div",{className:"color-option"},(0,t.createElement)("label",null,(0,l.__)("Couleur du titre","mon-theme-aca")),(0,t.createElement)(c.ColorPicker,{color:m,onChange:e=>n({titleColor:e}),enableAlpha:!0})),(0,t.createElement)("div",{className:"color-option"},(0,t.createElement)("label",null,(0,l.__)("Couleur de fond des cartes","mon-theme-aca")),(0,t.createElement)(c.ColorPicker,{color:d,onChange:e=>n({cardBgColor:e}),enableAlpha:!0})),(0,t.createElement)("div",{className:"color-option"},(0,t.createElement)("label",null,(0,l.__)("Couleur de bordure des cartes","mon-theme-aca")),(0,t.createElement)(c.ColorPicker,{color:u,onChange:e=>n({cardBorderColor:e}),enableAlpha:!0})),(0,t.createElement)("div",{className:"color-option"},(0,t.createElement)("label",null,(0,l.__)("Couleur du titre des cartes","mon-theme-aca")),(0,t.createElement)(c.ColorPicker,{color:C,onChange:e=>n({cardTitleColor:e}),enableAlpha:!0})),(0,t.createElement)("div",{className:"color-option"},(0,t.createElement)("label",null,(0,l.__)("Couleur du texte des cartes","mon-theme-aca")),(0,t.createElement)(c.ColorPicker,{color:h,onChange:e=>n({cardTextColor:e}),enableAlpha:!0})),(0,t.createElement)("div",{className:"color-option"},(0,t.createElement)("label",null,(0,l.__)("Couleur du nombre de ressources","mon-theme-aca")),(0,t.createElement)(c.ColorPicker,{color:p,onChange:e=>n({cardCountColor:e}),enableAlpha:!0})))),(0,t.createElement)("div",{...g},(0,t.createElement)("div",{className:"publications-collections-container"},(0,t.createElement)(o.RichText,{tagName:"h2",className:"collections-title",style:{color:m},value:r,onChange:e=>n({title:e}),placeholder:(0,l.__)("Titre...","mon-theme-aca")}),(0,t.createElement)("div",{className:"collections-grid"},i.map(((e,c)=>(0,t.createElement)("div",{key:c,className:"collection-card",style:{backgroundColor:d,borderLeftColor:u}},(0,t.createElement)("div",{className:"collection-icon"},e.icon),(0,t.createElement)(o.RichText,{tagName:"h3",className:"collection-card-title",style:{color:C},value:e.title,onChange:e=>v(c,"title",e),placeholder:(0,l.__)("Titre de la collection...","mon-theme-aca")}),(0,t.createElement)(o.RichText,{tagName:"p",className:"collection-description",style:{color:h},value:e.description,onChange:e=>v(c,"description",e),placeholder:(0,l.__)("Description...","mon-theme-aca")}),(0,t.createElement)(o.RichText,{tagName:"span",className:"collection-count",style:{color:p},value:`${e.count} ressources`,onChange:e=>{const t=e.match(/^(\d+)/);t&&v(c,"count",t[1])},placeholder:(0,l.__)("Nombre de ressources...","mon-theme-aca")}))))))))},save:function({attributes:e}){const{title:l,collections:c,backgroundColor:a,titleColor:n,cardBgColor:r,cardBorderColor:i,cardTitleColor:s,cardTextColor:m,cardCountColor:d}=e,u=o.useBlockProps.save({className:"publications-collections-block",style:{backgroundColor:a}});return(0,t.createElement)("section",{...u},(0,t.createElement)("div",{className:"publications-collections-container"},(0,t.createElement)(o.RichText.Content,{tagName:"h2",className:"collections-title",style:{color:n},value:l}),(0,t.createElement)("div",{className:"collections-grid"},c.map(((e,l)=>(0,t.createElement)("div",{key:l,className:"collection-card",style:{backgroundColor:r,borderLeftColor:i}},(0,t.createElement)("div",{className:"collection-icon"},e.icon),(0,t.createElement)(o.RichText.Content,{tagName:"h3",className:"collection-card-title",style:{color:s},value:e.title}),(0,t.createElement)(o.RichText.Content,{tagName:"p",className:"collection-description",style:{color:m},value:e.description}),(0,t.createElement)("span",{className:"collection-count",style:{color:d}},e.count," ressources")))))))}})})();