(()=>{"use strict";const e=window.wp.blocks,a=window.React,t=window.wp.i18n,l=window.wp.blockEditor,n=window.wp.components,o=window.wp.element,c=JSON.parse('{"UU":"mon-theme-aca/publications-modal"}');(0,e.registerBlockType)(c.UU,{edit:function({attributes:e,setAttributes:c}){const{backgroundColor:r,modalBgColor:s,titleColor:m,textColor:i,secondaryTextColor:d,accentColor:u,buttonBgColor:p,buttonTextColor:E}=e,b=(0,l.useBlockProps)({className:"publications-modal-block"}),g={id:1,title:"Guide du Producteur de Coton Biologique 2024",type:"Guide",author:"ACA Research Team",date:"2024-11-15",language:"Français",level:"Intermédiaire",theme:"Production cotonnière",description:"Guide complet pour la transition vers la production de coton biologique, incluant les techniques agricoles, la certification et la commercialisation.",thumbnail:"https://via.placeholder.com/320x180/2D9B8A/FFFFFF?text=Guide+Bio",fileSize:"2.5 MB",pages:"45",downloads:"1250",rating:"4.8",tags:["Bio","Production","Certification"],isNew:!0};return(0,a.createElement)(o.Fragment,null,(0,a.createElement)(l.InspectorControls,null,(0,a.createElement)(n.PanelBody,{title:(0,t.__)("Couleurs","mon-theme-aca")},(0,a.createElement)("div",{className:"color-option"},(0,a.createElement)("label",null,(0,t.__)("Couleur de fond de l'overlay","mon-theme-aca")),(0,a.createElement)(n.ColorPicker,{color:r,onChange:e=>c({backgroundColor:e}),enableAlpha:!0})),(0,a.createElement)("div",{className:"color-option"},(0,a.createElement)("label",null,(0,t.__)("Couleur de fond de la modal","mon-theme-aca")),(0,a.createElement)(n.ColorPicker,{color:s,onChange:e=>c({modalBgColor:e}),enableAlpha:!0})),(0,a.createElement)("div",{className:"color-option"},(0,a.createElement)("label",null,(0,t.__)("Couleur du titre","mon-theme-aca")),(0,a.createElement)(n.ColorPicker,{color:m,onChange:e=>c({titleColor:e}),enableAlpha:!0})),(0,a.createElement)("div",{className:"color-option"},(0,a.createElement)("label",null,(0,t.__)("Couleur du texte principal","mon-theme-aca")),(0,a.createElement)(n.ColorPicker,{color:i,onChange:e=>c({textColor:e}),enableAlpha:!0})),(0,a.createElement)("div",{className:"color-option"},(0,a.createElement)("label",null,(0,t.__)("Couleur du texte secondaire","mon-theme-aca")),(0,a.createElement)(n.ColorPicker,{color:d,onChange:e=>c({secondaryTextColor:e}),enableAlpha:!0})),(0,a.createElement)("div",{className:"color-option"},(0,a.createElement)("label",null,(0,t.__)("Couleur d'accent","mon-theme-aca")),(0,a.createElement)(n.ColorPicker,{color:u,onChange:e=>c({accentColor:e}),enableAlpha:!0})),(0,a.createElement)("div",{className:"color-option"},(0,a.createElement)("label",null,(0,t.__)("Couleur de fond du bouton","mon-theme-aca")),(0,a.createElement)(n.ColorPicker,{color:p,onChange:e=>c({buttonBgColor:e}),enableAlpha:!0})),(0,a.createElement)("div",{className:"color-option"},(0,a.createElement)("label",null,(0,t.__)("Couleur du texte du bouton","mon-theme-aca")),(0,a.createElement)(n.ColorPicker,{color:E,onChange:e=>c({buttonTextColor:e}),enableAlpha:!0})))),(0,a.createElement)("div",{...b},(0,a.createElement)("div",{className:"modal-preview"},(0,a.createElement)("h3",{className:"modal-preview-title",style:{color:m}},(0,t.__)("Aperçu de la fenêtre modale","mon-theme-aca")),(0,a.createElement)("p",{className:"modal-preview-description",style:{color:d}},(0,t.__)("Cette fenêtre modale s'affichera lorsqu'un utilisateur cliquera sur une publication dans la grille.","mon-theme-aca")),(0,a.createElement)("div",{className:"modal-preview-container",style:{backgroundColor:r}},(0,a.createElement)("div",{className:"modal-preview-content",style:{backgroundColor:s}},(0,a.createElement)("div",{className:"modal-header"},(0,a.createElement)("div",{className:"modal-type-icon",style:{backgroundColor:"#28A745"}},(0,a.createElement)("span",{className:"type-icon file-text-icon"})),(0,a.createElement)("div",{className:"modal-title-container"},(0,a.createElement)("h3",{className:"modal-title",style:{color:m}},g.title),(0,a.createElement)("div",{className:"modal-meta"},(0,a.createElement)("span",{style:{color:d}},g.author),(0,a.createElement)("span",{className:"meta-separator"},"•"),(0,a.createElement)("span",{style:{color:d}},new Date(g.date).toLocaleDateString("fr-FR")),(0,a.createElement)("span",{className:"meta-separator"},"•"),(0,a.createElement)("span",{style:{color:"#FD7E14"}},g.level))),(0,a.createElement)("button",{className:"modal-close-button"},(0,a.createElement)("span",{className:"close-icon"}))),(0,a.createElement)("div",{className:"modal-body"},(0,a.createElement)("div",{className:"modal-content"},(0,a.createElement)("div",{className:"modal-preview-placeholder"},(0,a.createElement)("div",{className:"preview-icon"}),(0,a.createElement)("p",{style:{color:d}},(0,t.__)("Aperçu du document disponible après téléchargement","mon-theme-aca"))),(0,a.createElement)("div",{className:"modal-description"},(0,a.createElement)("h4",{style:{color:m}},(0,t.__)("Description","mon-theme-aca")),(0,a.createElement)("p",{style:{color:i}},g.description),(0,a.createElement)("h4",{style:{color:m}},(0,t.__)("Tags","mon-theme-aca")),(0,a.createElement)("div",{className:"modal-tags"},g.tags.map(((e,t)=>(0,a.createElement)("span",{key:t,className:"modal-tag",style:{backgroundColor:"rgba(168, 230, 207, 0.2)",color:u}},e)))))),(0,a.createElement)("div",{className:"modal-sidebar"},(0,a.createElement)("div",{className:"modal-info-box"},(0,a.createElement)("h4",{style:{color:m}},(0,t.__)("Informations","mon-theme-aca")),(0,a.createElement)("div",{className:"info-list"},(0,a.createElement)("div",{className:"info-item"},(0,a.createElement)("span",{className:"info-label",style:{color:d}},(0,t.__)("Type:","mon-theme-aca")),(0,a.createElement)("span",{className:"info-value",style:{color:i}},g.type)),(0,a.createElement)("div",{className:"info-item"},(0,a.createElement)("span",{className:"info-label",style:{color:d}},(0,t.__)("Taille:","mon-theme-aca")),(0,a.createElement)("span",{className:"info-value",style:{color:i}},g.fileSize)),(0,a.createElement)("div",{className:"info-item"},(0,a.createElement)("span",{className:"info-label",style:{color:d}},(0,t.__)("Pages:","mon-theme-aca")),(0,a.createElement)("span",{className:"info-value",style:{color:i}},g.pages)),(0,a.createElement)("div",{className:"info-item"},(0,a.createElement)("span",{className:"info-label",style:{color:d}},(0,t.__)("Langue:","mon-theme-aca")),(0,a.createElement)("span",{className:"info-value",style:{color:i}},g.language)),(0,a.createElement)("div",{className:"info-item"},(0,a.createElement)("span",{className:"info-label",style:{color:d}},(0,t.__)("Téléchargements:","mon-theme-aca")),(0,a.createElement)("span",{className:"info-value",style:{color:i}},g.downloads)),(0,a.createElement)("div",{className:"info-item"},(0,a.createElement)("span",{className:"info-label",style:{color:d}},(0,t.__)("Note:","mon-theme-aca")),(0,a.createElement)("span",{className:"info-value rating"},(0,a.createElement)("span",{className:"star-icon"}),(0,a.createElement)("span",null,g.rating))))),(0,a.createElement)("div",{className:"modal-actions"},(0,a.createElement)("button",{className:"modal-action-button download-button",style:{backgroundColor:p,color:E}},(0,a.createElement)("span",{className:"action-icon download-icon"}),(0,a.createElement)("span",null,(0,t.__)("Télécharger","mon-theme-aca"))),(0,a.createElement)("button",{className:"modal-action-button share-button",style:{borderColor:u,color:u}},(0,a.createElement)("span",{className:"action-icon share-icon"}),(0,a.createElement)("span",null,(0,t.__)("Partager","mon-theme-aca"))),(0,a.createElement)("button",{className:"modal-action-button bookmark-button",style:{borderColor:d,color:d}},(0,a.createElement)("span",{className:"action-icon bookmark-icon"}),(0,a.createElement)("span",null,(0,t.__)("Favoris","mon-theme-aca")))))))))))},save:function({attributes:e}){const{backgroundColor:t,modalBgColor:n,titleColor:o,textColor:c,secondaryTextColor:r,accentColor:s,buttonBgColor:m,buttonTextColor:i}=e,d=l.useBlockProps.save({className:"publications-modal-block"});return(0,a.createElement)("div",{...d},(0,a.createElement)("div",{id:"publications-modal",className:"publications-modal",style:{backgroundColor:t,display:"none"}},(0,a.createElement)("div",{className:"modal-content",style:{backgroundColor:n}},(0,a.createElement)("div",{className:"modal-header"},(0,a.createElement)("div",{className:"modal-type-icon"},(0,a.createElement)("span",{className:"type-icon"})),(0,a.createElement)("div",{className:"modal-title-container"},(0,a.createElement)("h3",{className:"modal-title",style:{color:o}}),(0,a.createElement)("div",{className:"modal-meta",style:{color:r}})),(0,a.createElement)("button",{className:"modal-close-button"},(0,a.createElement)("span",{className:"close-icon"}))),(0,a.createElement)("div",{className:"modal-body"},(0,a.createElement)("div",{className:"modal-content"},(0,a.createElement)("div",{className:"modal-preview-placeholder"},(0,a.createElement)("div",{className:"preview-icon"}),(0,a.createElement)("p",{style:{color:r}},"Aperçu du document disponible après téléchargement")),(0,a.createElement)("div",{className:"modal-description"},(0,a.createElement)("h4",{style:{color:o}},"Description"),(0,a.createElement)("p",{className:"modal-description-text",style:{color:c}}),(0,a.createElement)("h4",{style:{color:o}},"Tags"),(0,a.createElement)("div",{className:"modal-tags"}))),(0,a.createElement)("div",{className:"modal-sidebar"},(0,a.createElement)("div",{className:"modal-info-box"},(0,a.createElement)("h4",{style:{color:o}},"Informations"),(0,a.createElement)("div",{className:"info-list"},(0,a.createElement)("div",{className:"info-item"},(0,a.createElement)("span",{className:"info-label",style:{color:r}},"Type:"),(0,a.createElement)("span",{className:"info-value type-value",style:{color:c}})),(0,a.createElement)("div",{className:"info-item"},(0,a.createElement)("span",{className:"info-label",style:{color:r}},"Taille:"),(0,a.createElement)("span",{className:"info-value size-value",style:{color:c}})),(0,a.createElement)("div",{className:"info-item"},(0,a.createElement)("span",{className:"info-label",style:{color:r}},"Pages:"),(0,a.createElement)("span",{className:"info-value pages-value",style:{color:c}})),(0,a.createElement)("div",{className:"info-item"},(0,a.createElement)("span",{className:"info-label",style:{color:r}},"Langue:"),(0,a.createElement)("span",{className:"info-value language-value",style:{color:c}})),(0,a.createElement)("div",{className:"info-item"},(0,a.createElement)("span",{className:"info-label",style:{color:r}},"Téléchargements:"),(0,a.createElement)("span",{className:"info-value downloads-value",style:{color:c}})),(0,a.createElement)("div",{className:"info-item"},(0,a.createElement)("span",{className:"info-label",style:{color:r}},"Note:"),(0,a.createElement)("span",{className:"info-value rating-value"},(0,a.createElement)("span",{className:"star-icon"}),(0,a.createElement)("span",{className:"rating-number"}))))),(0,a.createElement)("div",{className:"modal-actions"},(0,a.createElement)("button",{className:"modal-action-button download-button",style:{backgroundColor:m,color:i}},(0,a.createElement)("span",{className:"action-icon download-icon"}),(0,a.createElement)("span",null,"Télécharger")),(0,a.createElement)("button",{className:"modal-action-button share-button",style:{borderColor:s,color:s}},(0,a.createElement)("span",{className:"action-icon share-icon"}),(0,a.createElement)("span",null,"Partager")),(0,a.createElement)("button",{className:"modal-action-button bookmark-button",style:{borderColor:r,color:r}},(0,a.createElement)("span",{className:"action-icon bookmark-icon"}),(0,a.createElement)("span",null,"Favoris"))))))),(0,a.createElement)("script",null,`\n                document.addEventListener('DOMContentLoaded', function() {\n                    // Listen for the openPublicationModal event\n                    document.addEventListener('openPublicationModal', function(e) {\n                        const publication = e.detail.publication;\n                        const modal = document.getElementById('publications-modal');\n                        \n                        if (!modal || !publication) return;\n                        \n                        // Set modal content\n                        const typeIcon = modal.querySelector('.type-icon');\n                        const title = modal.querySelector('.modal-title');\n                        const meta = modal.querySelector('.modal-meta');\n                        const description = modal.querySelector('.modal-description-text');\n                        const tags = modal.querySelector('.modal-tags');\n                        const typeValue = modal.querySelector('.type-value');\n                        const sizeValue = modal.querySelector('.size-value');\n                        const pagesValue = modal.querySelector('.pages-value');\n                        const languageValue = modal.querySelector('.language-value');\n                        const downloadsValue = modal.querySelector('.downloads-value');\n                        const ratingNumber = modal.querySelector('.rating-number');\n                        \n                        // Set type icon and background color\n                        const typeIconContainer = modal.querySelector('.modal-type-icon');\n                        if (typeIconContainer) {\n                            typeIconContainer.style.backgroundColor = getTypeColor(publication.type);\n                        }\n                        \n                        // Set content\n                        if (title) title.textContent = publication.title;\n                        if (meta) {\n                            meta.innerHTML = publication.author + \n                                ' <span class="meta-separator">•</span> ' + \n                                new Date(publication.date).toLocaleDateString('fr-FR') + \n                                ' <span class="meta-separator">•</span> ' + \n                                '<span style="color: ' + getLevelColor(publication.level) + '">' + publication.level + '</span>';\n                        }\n                        if (description) description.textContent = publication.description;\n                        \n                        // Set tags\n                        if (tags) {\n                            tags.innerHTML = '';\n                            if (publication.tags && publication.tags.length > 0) {\n                                publication.tags.forEach(tag => {\n                                    const tagElement = document.createElement('span');\n                                    tagElement.className = 'modal-tag';\n                                    tagElement.textContent = tag;\n                                    tagElement.style.backgroundColor = 'rgba(168, 230, 207, 0.2)';\n                                    tagElement.style.color = '${s}';\n                                    tags.appendChild(tagElement);\n                                });\n                            }\n                        }\n                        \n                        // Set info values\n                        if (typeValue) typeValue.textContent = publication.type;\n                        if (sizeValue) sizeValue.textContent = publication.fileSize;\n                        if (pagesValue) pagesValue.textContent = publication.pages || publication.duration || '';\n                        if (languageValue) languageValue.textContent = publication.language;\n                        if (downloadsValue) downloadsValue.textContent = publication.downloads;\n                        if (ratingNumber) ratingNumber.textContent = publication.rating;\n                        \n                        // Show modal\n                        modal.style.display = 'flex';\n                        \n                        // Close modal when clicking on close button or outside the modal\n                        const closeButton = modal.querySelector('.modal-close-button');\n                        if (closeButton) {\n                            closeButton.addEventListener('click', function() {\n                                modal.style.display = 'none';\n                            });\n                        }\n                        \n                        modal.addEventListener('click', function(e) {\n                            if (e.target === modal) {\n                                modal.style.display = 'none';\n                            }\n                        });\n                    });\n                    \n                    // Helper functions\n                    function getTypeColor(type) {\n                        switch (type) {\n                            case 'Guide': return '#28A745';\n                            case 'Rapport': return '#2D9B8A';\n                            case 'Étude': return '#FD7E14';\n                            case 'Vidéo': return '#17A2B8';\n                            case 'Audio': return '#6C757D';\n                            case 'Infographie': return '#A8E6CF';\n                            default: return '#6C757D';\n                        }\n                    }\n                    \n                    function getLevelColor(level) {\n                        switch (level) {\n                            case 'Débutant': return '#28A745';\n                            case 'Intermédiaire': return '#FD7E14';\n                            case 'Expert': return '#DC3545';\n                            default: return '#6C757D';\n                        }\n                    }\n                });\n                `))}})})();